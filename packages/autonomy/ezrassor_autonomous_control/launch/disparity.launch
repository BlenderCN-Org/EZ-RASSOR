<?xml version="1.0" encoding="UTF-8"?>
<launch>

    <node pkg="ezrassor_autonomous_control" type="tf_camera_broadcaster" name="tf_camera_broadcaster"/>

	  <!-- launch image and disparity nodelets -->
  	<node pkg="stereo_image_proc" type="stereo_image_proc" name="stereo_image_proc" ns="/ezrassor/front_camera">
      <param name="prefilter_size" type="int" value="9"/>
      <param name="prefilter_cap" type="int" value="31"/>
      <param name="correlation_window_size" type="int" value="20"/> 
      <param name="min_disparity" type="int" value="3"/>
      <param name="disparity_range" type="int" value="64"/>
      <param name="uniqueness_ratio" type="double" value="15"/>
  		<param name="texture_threshold" type="int" value="100"/> 
  		<param name="speckle_size" type="int" value="1000"/>
      <param name="speckle_range" type="int" value="200"/>
      <param name="queue_size" type="int" value="10"/>
      
      
 	  </node>

  	<node pkg="image_view" type="stereo_view" name="stereo_view">
  		<remap from="/stereo/disparity" to="/ezrassor/front_camera/disparity"></remap>
  		<remap from="/stereo/left/image" to="/ezrassor/front_camera/left/image_rect"></remap>
  		<remap from="/stereo/right/image" to="/ezrassor/front_camera/right/image_rect"></remap>
  	</node>

    <node pkg="viso2_ros" type="stereo_odometer" name="stereo_odometer">
        <param name="sensor_frame_id" value="left_camera_optical_frame"/>
        <param name="ref_frame_motion_threshold" type="double" value="2.0"/>
        <param name="ref_frame_inlier_threshold" type="int" value="50"/>
        <remap from="/stereo/left/image" to="/ezrassor/front_camera/left/image_rect"/>
        <remap from="/stereo/right/image" to="/ezrassor/front_camera/right/image_rect"/>
        <remap from="/stereo/left/camera_info" to="/ezrassor/front_camera/left/camera_info"/>
        <remap from="/stereo/right/camera_info" to="/ezrassor/front_camera/right/camera_info"/>
    </node>

    <node pkg="ezrassor_autonomous_control" type="distance_map" name="distance_map"/>
    
</launch>