<?xml version="1.0" encoding="UTF-8"?>
<launch>

  <arg name="id"
       default=""
       doc="Robot ID Number."
  />

  <group ns="ezrassor$(arg id)">

    <include file="$(find ezrassor_topic_switch)/launch/topic_switch.launch">
      <arg name="primary_topic" value="manual_wheel_instructions"/>
      <arg name="secondary_topic" value="autonomous_wheel_instructions"/>
      <arg name="output_topic" value="wheel_instructions"/>
      <arg name="topic_type" value="Twist"/>
    </include>

    <include file="$(find ezrassor_topic_switch)/launch/topic_switch.launch">
      <arg name="primary_topic" value="front_manual_arm_instructions"/>
      <arg name="secondary_topic" value="front_autonomous_arm_instructions"/>
      <arg name="output_topic" value="front_arm_instructions"/>
      <arg name="topic_type" value="Float32"/>
    </include>

    <include file="$(find ezrassor_topic_switch)/launch/topic_switch.launch">
      <arg name="primary_topic" value="back_manual_arm_instructions"/>
      <arg name="secondary_topic" value="back_autonomous_arm_instructions"/>
      <arg name="output_topic" value="back_arm_instructions"/>
      <arg name="topic_type" value="Float32"/>
    </include>

    <include file="$(find ezrassor_topic_switch)/launch/topic_switch.launch">
      <arg name="primary_topic" value="front_manual_drum_instructions"/>
      <arg name="secondary_topic" value="front_autonomous_drum_instructions"/>
      <arg name="output_topic" value="front_drum_instructions"/>
      <arg name="topic_type" value="Float32"/>
    </include>

    <include file="$(find ezrassor_topic_switch)/launch/topic_switch.launch">
      <arg name="primary_topic" value="back_manual_drum_instructions"/>
      <arg name="secondary_topic" value="back_autonomous_drum_instructions"/>
      <arg name="output_topic" value="back_drum_instructions"/>
      <arg name="topic_type" value="Float32"/>
    </include>

    <node pkg="ezrassor_autonomous_control" name="autonomous_control" type="autonomous_control">
      <param name="movement_topic" value="autonomous_wheel_instructions"/>
      <param name="arms_topic" value="autonomous_arm_instructions"/>
      <param name="drums_topic" value="autonomous_drum_instructions"/>
      <param name="max_linear_velocity" value="1"/>
      <param name="max_angular_velocity" value="1"/>
      <param name="real_odometry" value="True"/>
    </node>
    
    <include file="$(find ezrassor_autonomous_control)/launch/disparity.launch"/>

  </group>

</launch>